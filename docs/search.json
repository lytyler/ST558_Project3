[
  {
    "objectID": "Modeling.html",
    "href": "Modeling.html",
    "title": "Modeling: Diabetes Health Indicators",
    "section": "",
    "text": "The data used in this analysis is from the Diabetes Health Indicators Data Set available at kaggle. The specific data file used is diabetes_binary_health_indicators_BRFSS2015.csv. This file consists of a cleaned data set of 253,680 survey responses to the CDC’s Behavioral Risk Factor Surveillance System (RFSS) 2015. This analysis is focused on the lifestyle factors of smoking, drinking, physical activity, eating fruits and vegetables, as well as the basic body features of BMI, sex, and age, with the goal of building a model of these variables to predict diabetes status. A more detailed description of the variables is given in the EDA portion of the project.\nLearn more about the original data here.\n\n\n\nThe purpose of this modeling exercise is to fit both classification tree and random forest models to the variables under consideration in order to predict diabetes status. A best fit model of each type will be selected, and then an overall best fit will be selected. The modeling data is split into training and test sets, five-fold cross-validation is used to to fit each model type, and log-loss is used as the metric for selecting models. The best fit for each model type will be fit on the entire training data set, and then an overall best model will be chosen. THe final model will be fit again on the entire data set.\nThe ultimate goal of the entire project is to fit predictive models to the variables, choose a best fit model of each type and then an overall best fit, and then house that model in an API within a docker container tk make model predictions accessible to others."
  },
  {
    "objectID": "Modeling.html#introduction",
    "href": "Modeling.html#introduction",
    "title": "Modeling: Diabetes Health Indicators",
    "section": "",
    "text": "The data used in this analysis is from the Diabetes Health Indicators Data Set available at kaggle. The specific data file used is diabetes_binary_health_indicators_BRFSS2015.csv. This file consists of a cleaned data set of 253,680 survey responses to the CDC’s Behavioral Risk Factor Surveillance System (RFSS) 2015. This analysis is focused on the lifestyle factors of smoking, drinking, physical activity, eating fruits and vegetables, as well as the basic body features of BMI, sex, and age, with the goal of building a model of these variables to predict diabetes status. A more detailed description of the variables is given in the EDA portion of the project.\nLearn more about the original data here.\n\n\n\nThe purpose of this modeling exercise is to fit both classification tree and random forest models to the variables under consideration in order to predict diabetes status. A best fit model of each type will be selected, and then an overall best fit will be selected. The modeling data is split into training and test sets, five-fold cross-validation is used to to fit each model type, and log-loss is used as the metric for selecting models. The best fit for each model type will be fit on the entire training data set, and then an overall best model will be chosen. THe final model will be fit again on the entire data set.\nThe ultimate goal of the entire project is to fit predictive models to the variables, choose a best fit model of each type and then an overall best fit, and then house that model in an API within a docker container tk make model predictions accessible to others."
  },
  {
    "objectID": "Modeling.html#preliminary-tasks",
    "href": "Modeling.html#preliminary-tasks",
    "title": "Modeling: Diabetes Health Indicators",
    "section": "Preliminary Tasks",
    "text": "Preliminary Tasks\nLoad packages, read in and transform data, and create data set for modeling.\nLoad packages:\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   4.0.1     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.4     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(tidymodels)\n\n── Attaching packages ────────────────────────────────────── tidymodels 1.4.1 ──\n✔ broom        1.0.9     ✔ rsample      1.3.1\n✔ dials        1.4.2     ✔ tailor       0.1.0\n✔ infer        1.0.9     ✔ tune         2.0.1\n✔ modeldata    1.5.1     ✔ workflows    1.3.0\n✔ parsnip      1.3.3     ✔ workflowsets 1.1.1\n✔ recipes      1.3.1     ✔ yardstick    1.3.2\n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n\n\nRead in and transform data: Applying same transformations as in EDA.qmd, except not adding labels this time\n\noriginal_diabetes_data &lt;- read_csv(\"diabetes_binary_health_indicators_BRFSS2015.csv\")\n\nRows: 253680 Columns: 22\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (22): Diabetes_binary, HighBP, HighChol, CholCheck, BMI, Smoker, Stroke,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nd_data &lt;- original_diabetes_data |&gt;\n  rename(\"dia_ind\" = \"Diabetes_binary\",\n         \"bp\" = \"HighBP\",\n         \"chol\" = \"HighChol\",\n         \"chol_ch5\" = \"CholCheck\",\n         \"bmi\" = \"BMI\",\n         \"smoker\" = \"Smoker\",\n         \"stroke\" = \"Stroke\",\n         \"hrt_dis_atk\" = \"HeartDiseaseorAttack\",\n         \"phys_act\" = \"PhysActivity\",\n         \"fruits\" = \"Fruits\",\n         \"veggies\" = \"Veggies\",\n         \"alcohol\" = \"HvyAlcoholConsump\",\n         \"h_care\" = \"AnyHealthcare\",\n         \"no_doc\" = \"NoDocbcCost\",\n         \"gen_health\" = \"GenHlth\", \n         \"m_health\" =\"MentHlth\", \n         \"ph_health\" = \"PhysHlth\",\n         \"walk_diff\" = \"DiffWalk\", \n         \"sex\" = \"Sex\", \n         \"age\" =\"Age\", \n         \"edu\"  =\"Education\", \n         \"income\" = \"Income\")\n\nd_data &lt;- d_data |&gt; mutate(\n  dia_ind = factor(dia_ind, levels = c(0, 1), \n                   labels = c(\"No Diabetes\", \"Diabetes\")), \n  bp = factor(bp, levels = c(0, 1), \n              labels = c(\"No High BP\", \"High BP\")), \n  chol = factor(chol, levels = c(0, 1), \n                labels = c(\"No High Cholesterol\", \"High Cholesterol\")), \n  chol_ch5 = factor(chol_ch5, levels = c(0, 1),\n                    labels = c(\"No 5yr Cholesterol Check\", \"5yr Cholesterol Check\")),\n  smoker = factor(smoker, levels = c(0, 1),\n                  labels = c(\"Non-Smoker\", \"Smoker\")),\n  stroke = factor(stroke, levels = c(0, 1),\n                  labels = c(\"No Stroke\", \"Stroke\")),      \n  hrt_dis_atk = factor(hrt_dis_atk, levels = c(0, 1),\n                  labels = c(\"No Heart Disease/Attack\", \"Heart Disease/Attack\")),\n  phys_act = factor(phys_act, levels = c(0, 1),\n                  labels = c(\"No Physical Activity\", \"Physical Activity\")), \n  fruits = factor(fruits, levels = c(0, 1),\n                  labels = c(\"No Fruit\", \"Fruit\")), \n  veggies = factor(veggies, levels = c(0, 1),\n                  labels = c(\"No Veggies\", \"Veggies\")),     \n  alcohol = factor(alcohol, levels = c(0, 1),\n                  labels = c(\"Not Heavy Drinker\", \"Heavy Drinker\")),    \n  h_care = factor(h_care, levels = c(0, 1),\n                  labels = c(\"No Healthcare Coverage\", \"Healthcare Coverage\")),      \n  no_doc = factor(no_doc, levels = c(0, 1),\n                  labels = c(\"No Missed Visit Due to Money\", \"Missed Visit Due to Money\")),      \n  gen_health = factor(gen_health, levels = c(1, 2, 3, 4, 5),\n                      labels = c(\"Excellent General\", \"Very Good General Health\", \n                                 \"Good General Health\", \"Fair General Health\", \"Poor General Health\")),\n  m_health = factor(m_health, levels = c(0:30),\n                      labels = c(0:30)),\n  ph_health = factor(ph_health, levels = c(0:30),\n                      labels = c(0:30)),\n  walk_diff = factor(walk_diff, levels = c(0, 1),\n                      labels = c(\"No Difficulty Walking\", \"Difficulty Walking\")),\n  sex = factor(sex, levels = c(0, 1),\n                  labels = c(\"Female\", \"Male\")),\n  age = factor(age, levels = c(1:13),\n               labels = c(\"Ages 18 to 24\", \n                          \"Ages 25 to 29\", \n                          \"Ages 30 to 34\", \n                          \"Ages 35 to 39\",\n                          \"Ages 40 to 44\", \n                          \"Ages 45 to 49\", \n                          \"Ages 50 to 54\", \n                          \"Ages 55 to 59\",\n                          \"Ages 60 to 64\",\n                          \"Ages 65 to 69\",\n                          \"Ages 70 to 74\",\n                          \"Ages 75 to 79\",\n                          \"Ages 80 or older\")),         \n  edu = factor(edu, levels = c(1:6),\n               labels = c(\"Kindergarten or Less\", \"Grades 1 to 8\", \"Some High School\", \"High School Graduate\", \"Some College or Technical School\", \"College Graduate\")),\n  income = factor(income, levels = c(1:8),\n                  labels = c(\"Less than $10,000\",\n                             \"$10,000 to less than $15,000\",\n                             \"$15,000 to less than $20,000\",\n                             \"$20,000 to less than $25,000\",\n                             \"$25,000 to less than $35,000\", \n                             \"$35,000 to less than $50,000\",\n                             \"$50,000 to less than $75,000\",\n                             \"$75,000 or more\")))\n\nCreate modeling data file:\n\nm_data &lt;- d_data |&gt; select(dia_ind, bmi, smoker, phys_act, fruits, veggies, alcohol, sex, age)"
  },
  {
    "objectID": "Modeling.html#split-data",
    "href": "Modeling.html#split-data",
    "title": "Modeling: Diabetes Health Indicators",
    "section": "Split Data",
    "text": "Split Data\nSplit data into training and test sets, create folds for cross-validation (CV).\nSplit data into training and test sets:\n\nset.seed(50)\nm_split &lt;- initial_split(m_data, prop = 0.7, strata = dia_ind)\nm_train &lt;- training(m_split)\nm_test &lt;- testing(m_split)\nm_train #take a look\n\n# A tibble: 177,575 × 9\n   dia_ind    bmi smoker     phys_act         fruits veggies alcohol sex   age  \n   &lt;fct&gt;    &lt;dbl&gt; &lt;fct&gt;      &lt;fct&gt;            &lt;fct&gt;  &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt; &lt;fct&gt;\n 1 Diabetes    30 Smoker     No Physical Act… Fruit  Veggies Not He… Fema… Ages…\n 2 Diabetes    25 Smoker     Physical Activi… Fruit  Veggies Not He… Male  Ages…\n 3 Diabetes    28 Non-Smoker No Physical Act… No Fr… Veggies Not He… Fema… Ages…\n 4 Diabetes    23 Smoker     Physical Activi… No Fr… No Veg… Not He… Male  Ages…\n 5 Diabetes    37 Smoker     No Physical Act… No Fr… Veggies Not He… Male  Ages…\n 6 Diabetes    27 Smoker     No Physical Act… Fruit  Veggies Not He… Fema… Ages…\n 7 Diabetes    24 Smoker     No Physical Act… No Fr… No Veg… Not He… Fema… Ages…\n 8 Diabetes    33 Smoker     No Physical Act… No Fr… Veggies Not He… Fema… Ages…\n 9 Diabetes    27 Smoker     No Physical Act… No Fr… Veggies Not He… Fema… Ages…\n10 Diabetes    27 Non-Smoker Physical Activi… Fruit  Veggies Not He… Fema… Ages…\n# ℹ 177,565 more rows\n\nm_test #take a look\n\n# A tibble: 76,105 × 9\n   dia_ind       bmi smoker     phys_act      fruits veggies alcohol sex   age  \n   &lt;fct&gt;       &lt;dbl&gt; &lt;fct&gt;      &lt;fct&gt;         &lt;fct&gt;  &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt; &lt;fct&gt;\n 1 No Diabetes    40 Smoker     No Physical … No Fr… Veggies Not He… Fema… Ages…\n 2 No Diabetes    28 Non-Smoker No Physical … Fruit  No Veg… Not He… Fema… Ages…\n 3 No Diabetes    24 Non-Smoker No Physical … No Fr… Veggies Not He… Male  Ages…\n 4 No Diabetes    26 Smoker     No Physical … No Fr… Veggies Not He… Fema… Ages…\n 5 No Diabetes    33 Non-Smoker Physical Act… No Fr… No Veg… Not He… Fema… Ages…\n 6 No Diabetes    28 Non-Smoker No Physical … No Fr… No Veg… Heavy … Male  Ages…\n 7 No Diabetes    38 Smoker     No Physical … Fruit  Veggies Not He… Fema… Ages…\n 8 Diabetes       27 Non-Smoker Physical Act… Fruit  Veggies Not He… Fema… Ages…\n 9 Diabetes       28 Smoker     No Physical … No Fr… Veggies Not He… Male  Ages…\n10 Diabetes       34 Smoker     Physical Act… No Fr… No Veg… Not He… Fema… Ages…\n# ℹ 76,095 more rows\n\n\nCreate CV folds on training data:\n\nm_CV_folds &lt;- vfold_cv(m_train, 5)"
  },
  {
    "objectID": "Modeling.html#classification-tree-model",
    "href": "Modeling.html#classification-tree-model",
    "title": "Modeling: Diabetes Health Indicators",
    "section": "Classification Tree Model",
    "text": "Classification Tree Model\nA classification tree is a type of decision tree. It is a flexible, nonlinear model in which the predictor space is divided into regions, and a prediction value is assigned to each region. The most common classification for a region is usually assigned to that region, which is what is done here. The modeling algorithm determines the best variable to start with (the most influential) and where to split the variables. The values of the variables determine the value of the prediction, according to the fitted decision tree.\nUsing the tidymodels framework, we will create a recipe, a model engine, and a workflow; fit the workflow to the CV folds; collect metrics and determine best classification tree model (best tuning parameter(s)), finalize the workflow and fit that best model to the entire training data set.\nCreate recipe:\n\ncl_tree_recipe &lt;- recipe(dia_ind ~ ., data = m_train) |&gt;\n  step_log(bmi) |&gt;\n  step_dummy(smoker, phys_act, fruits, veggies, alcohol, sex, age) |&gt;\n  step_normalize(all_numeric())\n\nCreate model engine:\n\ncl_tree_model &lt;- decision_tree(tree_depth = 6,\n                          min_n = 20,\n                          cost_complexity = tune()) |&gt;\n  set_engine(\"rpart\") |&gt;\n  set_mode(\"classification\")\n\nCreate workflow:\n\ncl_tree_wkflow &lt;- workflow() |&gt;\n  add_recipe(cl_tree_recipe) |&gt;\n  add_model(cl_tree_model)\n\nCreate fits:\n\n#first create grid\ncl_tree_grid &lt;- grid_regular(cost_complexity(),\n                          levels = 15)\n\n#then create fits with grid\ncl_tree_fits &lt;- cl_tree_wkflow |&gt; \n  tune_grid(resamples = m_CV_folds,\n            grid = cl_tree_grid,\n            metrics = metric_set(mn_log_loss))\n\nCollect metrics:\n\ncl_tree_fits |&gt;\n  collect_metrics() |&gt;\n  arrange(mean)\n\n# A tibble: 15 × 7\n   cost_complexity .metric     .estimator  mean     n std_err .config         \n             &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;           \n 1        1   e-10 mn_log_loss binary     0.382     5 0.00180 pre0_mod01_post0\n 2        4.39e-10 mn_log_loss binary     0.382     5 0.00180 pre0_mod02_post0\n 3        1.93e- 9 mn_log_loss binary     0.382     5 0.00180 pre0_mod03_post0\n 4        8.48e- 9 mn_log_loss binary     0.382     5 0.00180 pre0_mod04_post0\n 5        3.73e- 8 mn_log_loss binary     0.382     5 0.00180 pre0_mod05_post0\n 6        1.64e- 7 mn_log_loss binary     0.382     5 0.00180 pre0_mod06_post0\n 7        7.20e- 7 mn_log_loss binary     0.382     5 0.00180 pre0_mod07_post0\n 8        3.16e- 6 mn_log_loss binary     0.382     5 0.00180 pre0_mod08_post0\n 9        1.39e- 5 mn_log_loss binary     0.382     5 0.00180 pre0_mod09_post0\n10        6.11e- 5 mn_log_loss binary     0.382     5 0.00195 pre0_mod10_post0\n11        2.68e- 4 mn_log_loss binary     0.383     5 0.00165 pre0_mod11_post0\n12        1.18e- 3 mn_log_loss binary     0.404     5 0.00159 pre0_mod12_post0\n13        5.18e- 3 mn_log_loss binary     0.404     5 0.00159 pre0_mod13_post0\n14        2.28e- 2 mn_log_loss binary     0.404     5 0.00159 pre0_mod14_post0\n15        1   e- 1 mn_log_loss binary     0.404     5 0.00159 pre0_mod15_post0\n\n\nChoose the best fit classification tree model/best cost_complexity parameter:\n\ncl_tree_best_parameters &lt;- select_best(cl_tree_fits, metric = \"mn_log_loss\")\ncl_tree_best_parameters #take a look\n\n# A tibble: 1 × 2\n  cost_complexity .config         \n            &lt;dbl&gt; &lt;chr&gt;           \n1    0.0000000001 pre0_mod01_post0\n\n\nFinalize workflow and fit model to the entire training set:\n\ncl_tree_best_fit &lt;- cl_tree_wkflow |&gt;\n  finalize_workflow(cl_tree_best_parameters) |&gt;\n  last_fit(m_split, metrics = metric_set(mn_log_loss))\ncl_tree_best_fit #take a look\n\n# Resampling results\n# Manual resampling \n# A tibble: 1 × 6\n  splits                 id            .metrics .notes   .predictions .workflow \n  &lt;list&gt;                 &lt;chr&gt;         &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;    \n1 &lt;split [177575/76105]&gt; train/test s… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;     &lt;workflow&gt;\n\n\nWe now have the fit, plus the metrics for how this fit performs on the test set.\n\ncl_tree_best_fit |&gt;\n  collect_metrics()\n\n# A tibble: 1 × 4\n  .metric     .estimator .estimate .config        \n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          \n1 mn_log_loss binary         0.384 pre0_mod0_post0\n\n\nView plot of the model:\n\ncl_tree_best_fit |&gt;\n  extract_fit_engine() |&gt;\n  rpart.plot::rpart.plot(roundint = FALSE)\n\n\n\n\n\n\n\n\nThe classification tree splits first on BMI."
  },
  {
    "objectID": "Modeling.html#random-forest-model",
    "href": "Modeling.html#random-forest-model",
    "title": "Modeling: Diabetes Health Indicators",
    "section": "Random Forest Model",
    "text": "Random Forest Model\nThe regression tree model just fit to the diabetes data was an individual tree model. When prediction is the only goal, ensemble tree models can be used. Ensemble tree models are built from an average of many trees. To build many trees, bootstrapping is used to create many data samples. Each sample is then used to build an individual tree model, and the ensemble model is an average of the many individual models. This method decreases variance over individual tree fits.\nNon-parametric bootstrapping involves treating the original data sample as the population. Additional samples are created by drawing from the “population” with replacement. Building ensemble tree models using bootstrap aggregation is called bagging. The prediction is the most common classification for that region of predictor space across all of the fitted trees.\nRandom forest models are based on the same ideas as bagging, except that a random, set number of predictors is used at each step instead of using all of the predictors for each split. This improves the model over bagging in situations where a very strong predictor exists, causing more correlation between trees resulting in a smaller reduction in variance from aggregation. Random forest models protect against domination of the model by one or two good predictors.\nSimilar to the classification tree model, a random forest model will be generated for the diabetes data set using the tidymodels framework by defining a recipe, a model specification, and a workflow; fitting the workflow to the CV folds, collecting metrics and determining the best random forest model (best tuning parameter(s)), and fitting that best model to the entire training data set.\nCreate recipe:\n\nrandom_forest_recipe &lt;- recipe(dia_ind ~ ., data = m_train) |&gt;\n  update_role(age, new_role = \"ID\") |&gt;\n  step_log(bmi) |&gt;\n  step_dummy(smoker, phys_act, fruits, veggies, alcohol, sex) |&gt;\n  step_normalize(all_numeric())\n\nCreate model engine:\n\nrandom_forest_model &lt;- rand_forest(mtry = tune(), trees = 50) |&gt;\n  set_engine(\"ranger\", importance = \"impurity\") |&gt;\n  set_mode(\"classification\")\n\nThe model is tuning for the number of predictors to be randomly sampled at each split (mtry).\nCreate workflow:\n\nrandom_forest_wkflow &lt;- workflow() |&gt;\n  add_recipe(random_forest_recipe) |&gt;\n  add_model(random_forest_model)\n\nFit workflow to CV folds:\n\nrandom_forest_fits &lt;- random_forest_wkflow |&gt;\n  tune_grid(resamples = m_CV_folds, \n            grid = 7,\n            metrics = metric_set(mn_log_loss))\n\ni Creating pre-processing data to finalize 1 unknown parameter: \"mtry\"\n\n\nCollect metrics:\n\nrandom_forest_fits |&gt;\n  collect_metrics() |&gt;\n  arrange(mean)\n\n# A tibble: 6 × 7\n   mtry .metric     .estimator  mean     n std_err .config        \n  &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;          \n1     3 mn_log_loss binary     0.370     5 0.00196 pre0_mod3_post0\n2     2 mn_log_loss binary     0.372     5 0.00194 pre0_mod2_post0\n3     5 mn_log_loss binary     0.373     5 0.00159 pre0_mod4_post0\n4     6 mn_log_loss binary     0.378     5 0.00206 pre0_mod5_post0\n5     1 mn_log_loss binary     0.382     5 0.00209 pre0_mod1_post0\n6     7 mn_log_loss binary     0.395     5 0.00336 pre0_mod6_post0\n\n\nDetermine best random forest model fit/best mtry parameter:\n\nrandom_forest_best_parameters &lt;- select_best(random_forest_fits,\n                                             metric = \"mn_log_loss\")\nrandom_forest_best_parameters #take a look\n\n# A tibble: 1 × 2\n   mtry .config        \n  &lt;int&gt; &lt;chr&gt;          \n1     3 pre0_mod3_post0\n\n\nFinalize workflow and fit model to the entire training set:\n\nrandom_forest_best_fit &lt;- random_forest_wkflow |&gt;\n  finalize_workflow(random_forest_best_parameters) |&gt;\n  last_fit(m_split, metrics = metric_set(mn_log_loss))\nrandom_forest_best_fit #take a look\n\n# Resampling results\n# Manual resampling \n# A tibble: 1 × 6\n  splits                 id            .metrics .notes   .predictions .workflow \n  &lt;list&gt;                 &lt;chr&gt;         &lt;list&gt;   &lt;list&gt;   &lt;list&gt;       &lt;list&gt;    \n1 &lt;split [177575/76105]&gt; train/test s… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;     &lt;workflow&gt;\n\n\nWe now have the fit, plus the metrics for how this fit performs on the test set.\n\nrandom_forest_best_fit |&gt;\n  collect_metrics()\n\n# A tibble: 1 × 4\n  .metric     .estimator .estimate .config        \n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          \n1 mn_log_loss binary         0.371 pre0_mod0_post0\n\n\nVisualize the random forest best fit with a variable importance plot:\n\n#function for extracting importance values\nget_rf_imp &lt;- function(random_forest_object) {\n    extract_fit_parsnip(random_forest_object) |&gt;\n    vip::vi()\n}\n\n# use the function on the best random forest fit\nrf_importance &lt;- get_rf_imp(random_forest_best_fit)\n\n#plot the importance values\nggplot(rf_importance, aes(x = Importance, y = Variable)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Random Forest Best Fit:\", \n       subtitle = \"Variable Importance Plot\")\n\n\n\n\n\n\n\n\nAccording to the plot, the most important variable considered is BMI, by far. This parallels the classification tree’s first split on BMI. The next most important variable in the random forest according to the plot of the model is physical activity."
  },
  {
    "objectID": "Modeling.html#final-model-selection",
    "href": "Modeling.html#final-model-selection",
    "title": "Modeling: Diabetes Health Indicators",
    "section": "Final Model Selection",
    "text": "Final Model Selection\nCompare the performance of both best fit models on the test data:\n\nrbind(\ncl_tree_best_fit |&gt;\n  collect_metrics() |&gt;\n  mutate(\"Model\" = \"Best Classification Tree\") |&gt;\n  select(Model, everything()),\nrandom_forest_best_fit |&gt;\n  collect_metrics() |&gt;\n  mutate(\"Model\" = \"Best Random Forest\") |&gt;\n  select(Model, everything())\n)\n\n# A tibble: 2 × 5\n  Model                    .metric     .estimator .estimate .config        \n  &lt;chr&gt;                    &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          \n1 Best Classification Tree mn_log_loss binary         0.384 pre0_mod0_post0\n2 Best Random Forest       mn_log_loss binary         0.371 pre0_mod0_post0\n\n\nThe random forest best model has lower mean log-loss than the classification tree best model. The best-fit random forest model is the final model selected."
  },
  {
    "objectID": "Modeling.html#final-model",
    "href": "Modeling.html#final-model",
    "title": "Modeling: Diabetes Health Indicators",
    "section": "Final Model",
    "text": "Final Model\nFit the overall best model (the best random forest model) to the entire data set.\n\nfinal_model &lt;- random_forest_wkflow |&gt;\n  finalize_workflow(random_forest_best_parameters) |&gt;\n  fit(m_data)\n\nView the final model as a variable importance plot:\n\nvar_importance &lt;- get_rf_imp(final_model) #function to extract importance values\n\n#plot the importance values\nggplot(var_importance, aes(x = Importance, y = Variable)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Variable Importance Plot: Final Model\", \n       subtitle = \"Best Random Forest Model Fit on Entire Data Set\")\n\n\n\n\n\n\n\n\nExport modeling data set and final model for use in associated API:\n\nwrite_csv(m_data, \"modelAPI.R/diabetes_modeling_data.csv\")\nsaveRDS(final_model, file = \"modelAPI.R/final_model.rds\")"
  },
  {
    "objectID": "EDA.html",
    "href": "EDA.html",
    "title": "Exploratory Data Analysis: Diabetes Health Indicators",
    "section": "",
    "text": "The data used in this analysis is from the Diabetes Health Indicators Data Set available at kaggle. The specific data file used is diabetes_binary_health_indicators_BRFSS2015.csv. This file consists of a cleaned data set of 253,680 survey responses to the CDC’s Behavioral Risk Factor Surveillance System (RFSS) 2015. This analysis is focused on the lifestyle factors of smoking, drinking, physical activity, eating fruits and vegetables, as well as the basic body features of BMI, sex, and age, with the ultimate goal of building a model of these variables to predict diabetes status. These variables are described below:\nTarget Variable\n\nDiabetes_binary (renamed dia_ind; labelled Diabetes Status): two classes indicating no diabetes or pre-diabetes/diabetes\n\nPredictor Variables Considered\n\nBMI (renamed bmi; labeled BMI): Body Mass Index (continuous variable)\nSmoker (renamed smoker; labeled Smoker): two classes indicating whether the subject had smoked at least 100 cigarettes (5 packs) in their lifetime\nPhysActivity (renamed phys_act; labeled Physical Activity within Last Month): two classes indicating if subject had engaged in physical activity outside of work in the previous 30 days or not\nFruits (renamed fruits; labeled Daily Fruit): two classes indicating if subject had consumed fruit one or more times per day or not\nVeggies (renamed fruits; labeled Daily Veggie): two classes indicating if subject had consumed veggies one or more times per day or not\nHvyAlcoholConsump (renamed alcohol; labeled Heavy Alcohol Consumption): two classes indicating if men had consumed more than 14 drinks per week and women more than 7 or not\nSex (renamed sex; labeled Sex): two classes indicating male or female\nAge (renamed age; labelled Age): thirteen classes indicating age range (Ages 18 to 24, Ages 25 to 29, Ages 30 to 34, Ages 35 to 39, Ages 40 to 44, Ages 45 to 49, Ages 50 to 54, Ages 55 to 59, Ages 60 to 64, Ages 65 to 69, Ages 70 to 74, Ages 75 to 79, Ages 80 or older)\n\nLearn more about the original data here.\n\n\n\nThe purpose of this exploratory data analysis is to see data summaries and visualizations of the variables under consideration to begin to understand the relationship between these predictors and the target variable of diabetes status. The ultimate goal of the entire project is to fit two types of predictive models to the variables (classification tree and random forest), choose a best fit model of each type, choose the best of the two types, and then house that model in an API within a docker container to make model predictions accessible."
  },
  {
    "objectID": "EDA.html#introduction",
    "href": "EDA.html#introduction",
    "title": "Exploratory Data Analysis: Diabetes Health Indicators",
    "section": "",
    "text": "The data used in this analysis is from the Diabetes Health Indicators Data Set available at kaggle. The specific data file used is diabetes_binary_health_indicators_BRFSS2015.csv. This file consists of a cleaned data set of 253,680 survey responses to the CDC’s Behavioral Risk Factor Surveillance System (RFSS) 2015. This analysis is focused on the lifestyle factors of smoking, drinking, physical activity, eating fruits and vegetables, as well as the basic body features of BMI, sex, and age, with the ultimate goal of building a model of these variables to predict diabetes status. These variables are described below:\nTarget Variable\n\nDiabetes_binary (renamed dia_ind; labelled Diabetes Status): two classes indicating no diabetes or pre-diabetes/diabetes\n\nPredictor Variables Considered\n\nBMI (renamed bmi; labeled BMI): Body Mass Index (continuous variable)\nSmoker (renamed smoker; labeled Smoker): two classes indicating whether the subject had smoked at least 100 cigarettes (5 packs) in their lifetime\nPhysActivity (renamed phys_act; labeled Physical Activity within Last Month): two classes indicating if subject had engaged in physical activity outside of work in the previous 30 days or not\nFruits (renamed fruits; labeled Daily Fruit): two classes indicating if subject had consumed fruit one or more times per day or not\nVeggies (renamed fruits; labeled Daily Veggie): two classes indicating if subject had consumed veggies one or more times per day or not\nHvyAlcoholConsump (renamed alcohol; labeled Heavy Alcohol Consumption): two classes indicating if men had consumed more than 14 drinks per week and women more than 7 or not\nSex (renamed sex; labeled Sex): two classes indicating male or female\nAge (renamed age; labelled Age): thirteen classes indicating age range (Ages 18 to 24, Ages 25 to 29, Ages 30 to 34, Ages 35 to 39, Ages 40 to 44, Ages 45 to 49, Ages 50 to 54, Ages 55 to 59, Ages 60 to 64, Ages 65 to 69, Ages 70 to 74, Ages 75 to 79, Ages 80 or older)\n\nLearn more about the original data here.\n\n\n\nThe purpose of this exploratory data analysis is to see data summaries and visualizations of the variables under consideration to begin to understand the relationship between these predictors and the target variable of diabetes status. The ultimate goal of the entire project is to fit two types of predictive models to the variables (classification tree and random forest), choose a best fit model of each type, choose the best of the two types, and then house that model in an API within a docker container to make model predictions accessible."
  },
  {
    "objectID": "EDA.html#preliminary-tasks",
    "href": "EDA.html#preliminary-tasks",
    "title": "Exploratory Data Analysis: Diabetes Health Indicators",
    "section": "Preliminary Tasks",
    "text": "Preliminary Tasks\nLoad packages, read in data, and change variable names.\nLoad packages:\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   4.0.1     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.4     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(labelled)\n\nRead in data:\n\noriginal_diabetes_data &lt;- read_csv(\"diabetes_binary_health_indicators_BRFSS2015.csv\")\n\nRows: 253680 Columns: 22\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\ndbl (22): Diabetes_binary, HighBP, HighChol, CholCheck, BMI, Smoker, Stroke,...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nhead(original_diabetes_data) #take a look\n\n# A tibble: 6 × 22\n  Diabetes_binary HighBP HighChol CholCheck   BMI Smoker Stroke\n            &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1               0      1        1         1    40      1      0\n2               0      0        0         0    25      1      0\n3               0      1        1         1    28      0      0\n4               0      1        0         1    27      0      0\n5               0      1        1         1    24      0      0\n6               0      1        1         1    25      1      0\n# ℹ 15 more variables: HeartDiseaseorAttack &lt;dbl&gt;, PhysActivity &lt;dbl&gt;,\n#   Fruits &lt;dbl&gt;, Veggies &lt;dbl&gt;, HvyAlcoholConsump &lt;dbl&gt;, AnyHealthcare &lt;dbl&gt;,\n#   NoDocbcCost &lt;dbl&gt;, GenHlth &lt;dbl&gt;, MentHlth &lt;dbl&gt;, PhysHlth &lt;dbl&gt;,\n#   DiffWalk &lt;dbl&gt;, Sex &lt;dbl&gt;, Age &lt;dbl&gt;, Education &lt;dbl&gt;, Income &lt;dbl&gt;\n\n\nChange variable names to make them easier to work with:\n\nd_data &lt;- original_diabetes_data |&gt;\n  rename(\"dia_ind\" = \"Diabetes_binary\",\n         \"bp\" = \"HighBP\",\n         \"chol\" = \"HighChol\",\n         \"chol_ch5\" = \"CholCheck\",\n         \"bmi\" = \"BMI\",\n         \"smoker\" = \"Smoker\",\n         \"stroke\" = \"Stroke\",\n         \"hrt_dis_atk\" = \"HeartDiseaseorAttack\",\n         \"phys_act\" = \"PhysActivity\",\n         \"fruits\" = \"Fruits\",\n         \"veggies\" = \"Veggies\",\n         \"alcohol\" = \"HvyAlcoholConsump\",\n         \"h_care\" = \"AnyHealthcare\",\n         \"no_doc\" = \"NoDocbcCost\",\n         \"gen_health\" = \"GenHlth\", \n         \"m_health\" =\"MentHlth\", \n         \"ph_health\" = \"PhysHlth\",\n         \"walk_diff\" = \"DiffWalk\", \n         \"sex\" = \"Sex\", \n         \"age\" =\"Age\", \n         \"edu\"  =\"Education\", \n         \"income\" = \"Income\")\nhead(d_data) #take a look\n\n# A tibble: 6 × 22\n  dia_ind    bp  chol chol_ch5   bmi smoker stroke hrt_dis_atk phys_act fruits\n    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;\n1       0     1     1        1    40      1      0           0        0      0\n2       0     0     0        0    25      1      0           0        1      0\n3       0     1     1        1    28      0      0           0        0      1\n4       0     1     0        1    27      0      0           0        1      1\n5       0     1     1        1    24      0      0           0        1      1\n6       0     1     1        1    25      1      0           0        1      1\n# ℹ 12 more variables: veggies &lt;dbl&gt;, alcohol &lt;dbl&gt;, h_care &lt;dbl&gt;,\n#   no_doc &lt;dbl&gt;, gen_health &lt;dbl&gt;, m_health &lt;dbl&gt;, ph_health &lt;dbl&gt;,\n#   walk_diff &lt;dbl&gt;, sex &lt;dbl&gt;, age &lt;dbl&gt;, edu &lt;dbl&gt;, income &lt;dbl&gt;"
  },
  {
    "objectID": "EDA.html#data-validation",
    "href": "EDA.html#data-validation",
    "title": "Exploratory Data Analysis: Diabetes Health Indicators",
    "section": "Data Validation",
    "text": "Data Validation\nCheck for missing values, check data types/formats, and check for reasonable values.\nCheck for missing values in data set:\n\nsum(is.na(d_data))\n\n[1] 0\n\n\nThere do not seem to be any missing values in the data set. This is consistent with its description as a clean data set.\nLook at data types/formats:\n\nhead(d_data)\n\n# A tibble: 6 × 22\n  dia_ind    bp  chol chol_ch5   bmi smoker stroke hrt_dis_atk phys_act fruits\n    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;\n1       0     1     1        1    40      1      0           0        0      0\n2       0     0     0        0    25      1      0           0        1      0\n3       0     1     1        1    28      0      0           0        0      1\n4       0     1     0        1    27      0      0           0        1      1\n5       0     1     1        1    24      0      0           0        1      1\n6       0     1     1        1    25      1      0           0        1      1\n# ℹ 12 more variables: veggies &lt;dbl&gt;, alcohol &lt;dbl&gt;, h_care &lt;dbl&gt;,\n#   no_doc &lt;dbl&gt;, gen_health &lt;dbl&gt;, m_health &lt;dbl&gt;, ph_health &lt;dbl&gt;,\n#   walk_diff &lt;dbl&gt;, sex &lt;dbl&gt;, age &lt;dbl&gt;, edu &lt;dbl&gt;, income &lt;dbl&gt;\n\n\nAll columns in the data set are numeric, but most should be categorical.\nChange data columns to factor type as appropriate:\n\nd_data &lt;- d_data |&gt; mutate(\n  dia_ind = factor(dia_ind, levels = c(0, 1), \n                   labels = c(\"No Diabetes\", \"Diabetes\")), \n  bp = factor(bp, levels = c(0, 1), \n              labels = c(\"No High BP\", \"High BP\")), \n  chol = factor(chol, levels = c(0, 1), \n                labels = c(\"No High Cholesterol\", \"High Cholesterol\")), \n  chol_ch5 = factor(chol_ch5, levels = c(0, 1),\n                    labels = c(\"No 5yr Cholesterol Check\", \"5yr Cholesterol Check\")),\n  smoker = factor(smoker, levels = c(0, 1),\n                  labels = c(\"Non-Smoker\", \"Smoker\")),\n  stroke = factor(stroke, levels = c(0, 1),\n                  labels = c(\"No Stroke\", \"Stroke\")),      \n  hrt_dis_atk = factor(hrt_dis_atk, levels = c(0, 1),\n                  labels = c(\"No Heart Disease/Attack\", \"Heart Disease/Attack\")),\n  phys_act = factor(phys_act, levels = c(0, 1),\n                  labels = c(\"No Physical Activity\", \"Physical Activity\")), \n  fruits = factor(fruits, levels = c(0, 1),\n                  labels = c(\"No Fruit\", \"Fruit\")), \n  veggies = factor(veggies, levels = c(0, 1),\n                  labels = c(\"No Veggies\", \"Veggies\")),     \n  alcohol = factor(alcohol, levels = c(0, 1),\n                  labels = c(\"Not Heavy Drinker\", \"Heavy Drinker\")),    \n  h_care = factor(h_care, levels = c(0, 1),\n                  labels = c(\"No Healthcare Coverage\", \"Healthcare Coverage\")),      \n  no_doc = factor(no_doc, levels = c(0, 1),\n                  labels = c(\"No Missed Visit Due to Money\", \"Missed Visit Due to Money\")),      \n  gen_health = factor(gen_health, levels = c(1, 2, 3, 4, 5),\n                      labels = c(\"Excellent General\", \"Very Good General Health\", \n                                 \"Good General Health\", \"Fair General Health\", \"Poor General Health\")),\n  m_health = factor(m_health, levels = c(0:30),\n                      labels = c(0:30)),\n  ph_health = factor(ph_health, levels = c(0:30),\n                      labels = c(0:30)),\n  walk_diff = factor(walk_diff, levels = c(0, 1),\n                      labels = c(\"No Difficulty Walking\", \"Difficulty Walking\")),\n  sex = factor(sex, levels = c(0, 1),\n                  labels = c(\"Female\", \"Male\")),\n  age = factor(age, levels = c(1:13),\n               labels = c(\"Ages 18 to 24\", \n                          \"Ages 25 to 29\", \n                          \"Ages 30 to 34\", \n                          \"Ages 35 to 39\",\n                          \"Ages 40 to 44\", \n                          \"Ages 45 to 49\", \n                          \"Ages 50 to 54\", \n                          \"Ages 55 to 59\",\n                          \"Ages 60 to 64\",\n                          \"Ages 65 to 69\",\n                          \"Ages 70 to 74\",\n                          \"Ages 75 to 79\",\n                          \"Ages 80 or older\")),         \n  edu = factor(edu, levels = c(1:6),\n               labels = c(\"Kindergarten or Less\", \"Grades 1 to 8\", \"Some High School\", \"High School Graduate\", \"Some College or Technical School\", \"College Graduate\")),\n  income = factor(income, levels = c(1:8),\n                  labels = c(\"Less than $10,000\",\n                             \"$10,000 to less than $15,000\",\n                             \"$15,000 to less than $20,000\",\n                             \"$20,000 to less than $25,000\",\n                             \"$25,000 to less than $35,000\", \n                             \"$35,000 to less than $50,000\",\n                             \"$50,000 to less than $75,000\",\n                             \"$75,000 or more\")))\nhead(d_data) #take a look\n\n# A tibble: 6 × 22\n  dia_ind   bp    chol  chol_ch5   bmi smoker stroke hrt_dis_atk phys_act fruits\n  &lt;fct&gt;     &lt;fct&gt; &lt;fct&gt; &lt;fct&gt;    &lt;dbl&gt; &lt;fct&gt;  &lt;fct&gt;  &lt;fct&gt;       &lt;fct&gt;    &lt;fct&gt; \n1 No Diabe… High… High… 5yr Cho…    40 Smoker No St… No Heart D… No Phys… No Fr…\n2 No Diabe… No H… No H… No 5yr …    25 Smoker No St… No Heart D… Physica… No Fr…\n3 No Diabe… High… High… 5yr Cho…    28 Non-S… No St… No Heart D… No Phys… Fruit \n4 No Diabe… High… No H… 5yr Cho…    27 Non-S… No St… No Heart D… Physica… Fruit \n5 No Diabe… High… High… 5yr Cho…    24 Non-S… No St… No Heart D… Physica… Fruit \n6 No Diabe… High… High… 5yr Cho…    25 Smoker No St… No Heart D… Physica… Fruit \n# ℹ 12 more variables: veggies &lt;fct&gt;, alcohol &lt;fct&gt;, h_care &lt;fct&gt;,\n#   no_doc &lt;fct&gt;, gen_health &lt;fct&gt;, m_health &lt;fct&gt;, ph_health &lt;fct&gt;,\n#   walk_diff &lt;fct&gt;, sex &lt;fct&gt;, age &lt;fct&gt;, edu &lt;fct&gt;, income &lt;fct&gt;\n\n\nAll data columns are changed to factor type except for BMI which is left as numeric.\nLook at data summary to check for reasonable values:\n\nsummary(d_data)\n\n        dia_ind                bp                          chol       \n No Diabetes:218334   No High BP:144851   No High Cholesterol:146089  \n Diabetes   : 35346   High BP   :108829   High Cholesterol   :107591  \n                                                                      \n                                                                      \n                                                                      \n                                                                      \n                                                                      \n                     chol_ch5           bmi               smoker      \n No 5yr Cholesterol Check:  9470   Min.   :12.00   Non-Smoker:141257  \n 5yr Cholesterol Check   :244210   1st Qu.:24.00   Smoker    :112423  \n                                   Median :27.00                      \n                                   Mean   :28.38                      \n                                   3rd Qu.:31.00                      \n                                   Max.   :98.00                      \n                                                                      \n       stroke                        hrt_dis_atk    \n No Stroke:243388   No Heart Disease/Attack:229787  \n Stroke   : 10292   Heart Disease/Attack   : 23893  \n                                                    \n                                                    \n                                                    \n                                                    \n                                                    \n                 phys_act           fruits             veggies      \n No Physical Activity: 61760   No Fruit: 92782   No Veggies: 47839  \n Physical Activity   :191920   Fruit   :160898   Veggies   :205841  \n                                                                    \n                                                                    \n                                                                    \n                                                                    \n                                                                    \n              alcohol                          h_care      \n Not Heavy Drinker:239424   No Healthcare Coverage: 12417  \n Heavy Drinker    : 14256   Healthcare Coverage   :241263  \n                                                           \n                                                           \n                                                           \n                                                           \n                                                           \n                          no_doc                          gen_health   \n No Missed Visit Due to Money:232326   Excellent General       :45299  \n Missed Visit Due to Money   : 21354   Very Good General Health:89084  \n                                       Good General Health     :75646  \n                                       Fair General Health     :31570  \n                                       Poor General Health     :12081  \n                                                                       \n                                                                       \n    m_health        ph_health                      walk_diff     \n 0      :175680   0      :160052   No Difficulty Walking:211005  \n 2      : 13054   30     : 19400   Difficulty Walking   : 42675  \n 30     : 12088   2      : 14764                                 \n 5      :  9030   1      : 11388                                 \n 1      :  8538   3      :  8495                                 \n 3      :  7381   5      :  7622                                 \n (Other): 27909   (Other): 31959                                 \n     sex                    age       \n Female:141974   Ages 60 to 64:33244  \n Male  :111706   Ages 65 to 69:32194  \n                 Ages 55 to 59:30832  \n                 Ages 50 to 54:26314  \n                 Ages 70 to 74:23533  \n                 Ages 45 to 49:19819  \n                 (Other)      :87744  \n                               edu                                  income     \n Kindergarten or Less            :   174   $75,000 or more             :90385  \n Grades 1 to 8                   :  4043   $50,000 to less than $75,000:43219  \n Some High School                :  9478   $35,000 to less than $50,000:36470  \n High School Graduate            : 62750   $25,000 to less than $35,000:25883  \n Some College or Technical School: 69910   $20,000 to less than $25,000:20135  \n College Graduate                :107325   $15,000 to less than $20,000:15994  \n                                           (Other)                     :21594  \n\n\nEverything looks reasonable.\nAdd labels for when nicer names are desired:\n\nvar_label(d_data) &lt;- c(\"Diabetes Status\", \n                       \"Blood Pressure\",\n                       \"Cholesterol\",\n                       \"Cholesterol Check within 5 Years\", \n                       \"BMI\",\n                       \"Smoking Status\", \n                       \"Stroke Status\", \n                       \"Heart Disease or Attack History\", \n                       \"Physical Activity within Last Month\", \n                       \"Daily Fruit\", \n                       \"Daily Veggie\", \n                       \"Heavy Alcohol Consumption\", \n                       \"Healthcare Coverage Status\", \n                       \"Skipped Needed Doctor Visit Due to Cost in Last Year\", \n                       \"Self-Perception of General Health\", \n                       \"Self-Perception of Mental Health\", \n                       \"Self-Perception of Physical Health\", \n                       \"Serious Difficulty Walking or Climbing Stairs\", \n                       \"Sex\", \n                       \"Age\", \n                       \"Education\", \n                       \"Income\")   \nvar_label(d_data) #take a look at the labels\n\n$dia_ind\n[1] \"Diabetes Status\"\n\n$bp\n[1] \"Blood Pressure\"\n\n$chol\n[1] \"Cholesterol\"\n\n$chol_ch5\n[1] \"Cholesterol Check within 5 Years\"\n\n$bmi\n[1] \"BMI\"\n\n$smoker\n[1] \"Smoking Status\"\n\n$stroke\n[1] \"Stroke Status\"\n\n$hrt_dis_atk\n[1] \"Heart Disease or Attack History\"\n\n$phys_act\n[1] \"Physical Activity within Last Month\"\n\n$fruits\n[1] \"Daily Fruit\"\n\n$veggies\n[1] \"Daily Veggie\"\n\n$alcohol\n[1] \"Heavy Alcohol Consumption\"\n\n$h_care\n[1] \"Healthcare Coverage Status\"\n\n$no_doc\n[1] \"Skipped Needed Doctor Visit Due to Cost in Last Year\"\n\n$gen_health\n[1] \"Self-Perception of General Health\"\n\n$m_health\n[1] \"Self-Perception of Mental Health\"\n\n$ph_health\n[1] \"Self-Perception of Physical Health\"\n\n$walk_diff\n[1] \"Serious Difficulty Walking or Climbing Stairs\"\n\n$sex\n[1] \"Sex\"\n\n$age\n[1] \"Age\"\n\n$edu\n[1] \"Education\"\n\n$income\n[1] \"Income\""
  },
  {
    "objectID": "EDA.html#exploratory-data-analysis-eda",
    "href": "EDA.html#exploratory-data-analysis-eda",
    "title": "Exploratory Data Analysis: Diabetes Health Indicators",
    "section": "Exploratory Data Analysis (EDA)",
    "text": "Exploratory Data Analysis (EDA)\nThis exploratory data analysis focuses on variables related to lifestyle plus basic body characteristics.\n\nNumeric Summaries\nOne-Way Contingency Tables of Categorical Variables of Interest, as Proportions:\n\nproportions(table(d_data$dia_ind))\n\n\nNo Diabetes    Diabetes \n   0.860667    0.139333 \n\nproportions(table(d_data$smoker))\n\n\nNon-Smoker     Smoker \n 0.5568314  0.4431686 \n\nproportions(table(d_data$phys_act))\n\n\nNo Physical Activity    Physical Activity \n           0.2434563            0.7565437 \n\nproportions(table(d_data$fruits))\n\n\n No Fruit     Fruit \n0.3657442 0.6342558 \n\nproportions(table(d_data$veggies))\n\n\nNo Veggies    Veggies \n 0.1885801  0.8114199 \n\nproportions(table(d_data$alcohol))\n\n\nNot Heavy Drinker     Heavy Drinker \n       0.94380322        0.05619678 \n\nproportions(table(d_data$sex))\n\n\n   Female      Male \n0.5596578 0.4403422 \n\nproportions(table(d_data$age))\n\n\n   Ages 18 to 24    Ages 25 to 29    Ages 30 to 34    Ages 35 to 39 \n      0.02246925       0.02995112       0.04384658       0.05448991 \n   Ages 40 to 44    Ages 45 to 49    Ages 50 to 54    Ages 55 to 59 \n      0.06369048       0.07812599       0.10372911       0.12153895 \n   Ages 60 to 64    Ages 65 to 69    Ages 70 to 74    Ages 75 to 79 \n      0.13104699       0.12690792       0.09276648       0.06299275 \nAges 80 or older \n      0.06844450 \n\n\nMost respondents did not have diabetes (86%). A surprisingly high percentage smoked (44%). Most ate veggies (81%) and fruit (63%) at least once a day. Very few were heavy drinkers (6%). A bit over a half were female (56%).\nTwo-Way Contingency Tables of Categorical Variables of Interest, as Proportions, Grouped by Diabetes Status:\n\nproportions(table(d_data$dia_ind, d_data$smoker))\n\n             \n              Non-Smoker     Smoker\n  No Diabetes 0.48970356 0.37096342\n  Diabetes    0.06712788 0.07220514\n\nproportions(table(d_data$dia_ind, d_data$phys_act))\n\n             \n              No Physical Activity Physical Activity\n  No Diabetes           0.19197808        0.66868890\n  Diabetes              0.05147824        0.08785478\n\nproportions(table(d_data$dia_ind, d_data$fruits))\n\n             \n                No Fruit      Fruit\n  No Diabetes 0.30798250 0.55268448\n  Diabetes    0.05776175 0.08157127\n\nproportions(table(d_data$dia_ind, d_data$veggies))\n\n             \n              No Veggies   Veggies\n  No Diabetes  0.1546397 0.7060273\n  Diabetes     0.0339404 0.1053926\n\nproportions(table(d_data$dia_ind, d_data$alcohol))\n\n             \n              Not Heavy Drinker Heavy Drinker\n  No Diabetes       0.807749921   0.052917061\n  Diabetes          0.136053295   0.003279722\n\nproportions(table(d_data$dia_ind, d_data$sex))\n\n             \n                  Female       Male\n  No Diabetes 0.48708215 0.37358483\n  Diabetes    0.07257569 0.06675733\n\nproportions(table(d_data$dia_ind, d_data$age))\n\n             \n              Ages 18 to 24 Ages 25 to 29 Ages 30 to 34 Ages 35 to 39\n  No Diabetes  0.0221617786  0.0293992431  0.0426087985  0.0520222327\n  Diabetes     0.0003074740  0.0005518764  0.0012377799  0.0024676758\n             \n              Ages 40 to 44 Ages 45 to 49 Ages 50 to 54 Ages 55 to 59\n  No Diabetes  0.0595474614  0.0712590665  0.0915562914  0.1047343109\n  Diabetes     0.0041430148  0.0068669190  0.0121728161  0.0168046358\n             \n              Ages 60 to 64 Ages 65 to 69 Ages 70 to 74 Ages 75 to 79\n  No Diabetes  0.1084476506  0.1010564491  0.0725007884  0.0495782088\n  Diabetes     0.0225993377  0.0258514664  0.0202656891  0.0134145380\n             \n              Ages 80 or older\n  No Diabetes     0.0557947020\n  Diabetes        0.0126497950\n\n\nSlightly higher proportions of smokers compared to non-smokers, non-physically active compared to physically active, non-fruit eaters compared to fruit eaters, non-veggie eaters compared to veggie eaters, and males compared to females had diabetes. These were not big differences. Proportion of diabetes was higher at higher ages. Counter-intuitively, the heavy drinkers had a slightly lower proportion of diabetes than non-heavy drinkers.\nNumeric Data Summary of Numeric Variable (BMI):\n\nd_data |&gt; summarize(\"mean_BMI\" = mean(bmi), \n          \"median_BMI\" = median(bmi),\n          \"sd_BMI\" = sd(bmi))\n\n# A tibble: 1 × 3\n  mean_BMI median_BMI sd_BMI\n     &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;\n1     28.4         27   6.61\n\n\nNumeric Data Summary of BMI Grouped by Diabetes Status:\n\nd_data |&gt; \n  group_by(dia_ind) |&gt;\n  summarize(\"mean_BMI\" = mean(bmi), \n          \"median_BMI\" = median(bmi),\n          \"sd_BMI\" = sd(bmi))\n\n# A tibble: 2 × 4\n  dia_ind     mean_BMI median_BMI sd_BMI\n  &lt;fct&gt;          &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;\n1 No Diabetes     27.8         27   6.29\n2 Diabetes        31.9         31   7.36\n\n\nThe mean and median BMI were both about four points higher for those with diabetes, but this was within the standard deviation.\n\n\nGraphical Data Summaries\nBar Plots of Single Categorical Variables:\n\nggplot(data = d_data, aes(x = dia_ind, fill = dia_ind)) +\n  geom_bar() +\n  labs(y = \"Count\", title = paste(\"Bar Plot: \", var_label(d_data$dia_ind)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = smoker, fill = smoker)) +\n  geom_bar() +\n  labs(y = \"Count\", title = paste(\"Bar Plot: \", var_label(d_data$smoker)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = phys_act, fill = phys_act)) +\n  geom_bar() +\n  labs(y = \"Count\", title = paste(\"Bar Plot: \", var_label(d_data$phys_act)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = fruits, fill = fruits)) +\n  geom_bar() +\n  labs(y = \"Count\", title = paste(\"Bar Plot: \", var_label(d_data$fruits)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = veggies, fill = veggies)) +\n  geom_bar() +\n  labs(y = \"Count\", title = paste(\"Bar Plot: \", var_label(d_data$veggies)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = alcohol, fill = alcohol)) +\n  geom_bar() +\n  labs(y = \"Count\", title = paste(\"Bar Plot: \", var_label(d_data$alcohol)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = sex, fill = sex)) +\n  geom_bar() +\n  labs(y = \"Count\", title = paste(\"Bar Plot: \", var_label(d_data$sex)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = age, fill = age)) +\n  geom_bar() +\n  labs(y = \"Count\", title = paste(\"Bar Plot: \", var_label(d_data$age))) +\n  theme(axis.text.x=element_blank(), axis.ticks.x=element_blank())\n\n\n\n\n\n\n\n\nAs was seen in the one-way contingency tables, most respondents did not have diabetes. A surprisingly high number had smoked over 100 cigarettes. Most ate veggies and fruit at least once a day, but more ate veggies than ate fruit. Very few were heavy drinkers. A bit over half were female (56%).\nBar Plots of Categorical Variables Grouped by Diabetes Status:\n\nggplot(data = d_data, aes(x = smoker, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$smoker), \"Grouped by\", var_label(d_data$dia_ind)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = phys_act, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$phys_act), \"Grouped by\", var_label(d_data$dia_ind)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = fruits, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$fruits), \"Grouped by\", var_label(d_data$dia_ind)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = veggies, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$veggies), \"Grouped by\", var_label(d_data$dia_ind)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = alcohol, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$alcohol), \"Grouped by\", var_label(d_data$dia_ind)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = sex, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$sex), \"Grouped by\", var_label(d_data$dia_ind)))\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = dia_ind, fill = age)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$dia_ind), \"Grouped by\", var_label(d_data$age))) \n\n\n\n\n\n\n\n\nThe side-by-side bar plots show slightly higher proportions of diabetes for smokers compared to non-smokers, non-physically active compared to physically active, non-fruit eaters compared to fruit eaters, non-veggie eaters compared to veggie eaters, and male compared to female.\nBar Plots of Lifestyle Factors Faceted by Sex:\n\nggplot(data = d_data, aes(x = smoker, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$smoker), \"Grouped by\", var_label(d_data$dia_ind))) +\n  facet_wrap(~sex)\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = phys_act, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$phys_act), \"Grouped by\", var_label(d_data$dia_ind))) +\n  facet_wrap(~sex)\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = fruits, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$fruits), \"Grouped by\", var_label(d_data$dia_ind))) +\n  facet_wrap(~sex)\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = veggies, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$veggies), \"Grouped by\", var_label(d_data$dia_ind))) +\n  facet_wrap(~sex)\n\n\n\n\n\n\n\nggplot(data = d_data, aes(x = alcohol, fill = dia_ind)) +\n  geom_bar(position = \"dodge\") +\n  labs(y = \"Count\", title = \"Bar Plot:\", subtitle = paste(var_label(d_data$alcohol), \"Grouped by\", var_label(d_data$dia_ind))) +\n  facet_wrap(~sex)\n\n\n\n\n\n\n\n\nA greater proportion of women seem to practice healthier lifestyle factors, perhaps contributing to a slightly higher rate of diabetes among men in the data set.\nBox Plot and Smoothed Density Curve of Numeric Variable BMI:\n\nggplot(data = d_data, aes(x = bmi)) +\n  geom_density() +\n  labs(y = \"Density\", title = \"Smoothed Density Curve: BMI\")\n\n\n\n\n\n\n\nggplot(data = d_data, aes(y = bmi)) +\n  geom_boxplot() +\n  labs(y = \"BMI\", title = \"Box Plot: BMI\") +\n  theme(axis.text.x=element_blank(), axis.ticks.x=element_blank())\n\n\n\n\n\n\n\n\nThere are a lot of high-BMI outliers visible in the box plot. Log transforming the BMI data may improve model fits.\nBox Plots and Smoothed Density Curves of BMI Grouped by Diabetes Status\n\nggplot(data = d_data, aes(x = bmi, fill = dia_ind)) +\n  geom_density(alpha = 0.5) +\n  labs(y = \"Density\", title = \"Smoothed Density Curve: BMI\")\n\n\n\n\n\n\n\nggplot(data = d_data, aes(y = bmi, x = dia_ind, fill = dia_ind)) +\n  geom_boxplot() +\n  labs(y = \"BMI\", title = \"Box Plot: BMI\")\n\n\n\n\n\n\n\n\nThere are a lot of high_BMI outliers visible in both the diabetes and non-diabetes box plots. The box plots and smoothed density curves mostly overlap, but the diabetes group is slightly higher."
  },
  {
    "objectID": "EDA.html#eda-conclusion",
    "href": "EDA.html#eda-conclusion",
    "title": "Exploratory Data Analysis: Diabetes Health Indicators",
    "section": "EDA Conclusion",
    "text": "EDA Conclusion\nFrom the data summaries and visualizations of this data set, healthy lifestyle factors seem to correspond to slightly lower rates of diabetes and pre-diabetes, with the exception of heavy alcohol consumption. Men seemed to have slightly higher rates of diabetes and pre-diabetes than women, perhaps caused by their lower engagement in healthy lifestyle choices."
  },
  {
    "objectID": "EDA.html#link-to-modeling-page",
    "href": "EDA.html#link-to-modeling-page",
    "title": "Exploratory Data Analysis: Diabetes Health Indicators",
    "section": "Link to Modeling Page",
    "text": "Link to Modeling Page\nClick here for the Modeling Page"
  }
]